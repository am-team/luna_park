# Введение

В рамках предыдущих статей мы выделили область примения подхода. И рассмотрели основные методологические принципы DDD.

В данной статье я хотел бы хотел обозначить основные технологические паттерны проектирования. А также показать всевозможные комбинации этих паттернов для построения REST api.

В дальнейшем рассмотрим каждый паттерн подробно, с областью применния, примерами кода, выделим рекомендуемые практики, и написать готовый микросервис.

# Стек технологий

Данная статья будут более технологичной чем две предыдущие . Мы переходим от теории к практике.  

## Ruby

Как я писал ранее, у нас был большой монолит написанный на Ruby On Rails и команда рубистов, которая хотела это изменить. У ruby к сожалению не самый большой инструментарий для DDD разработки. Но сам по себе язык, среди языков веб разработки, на мой взгляд, является самым выразительным и поэтому больше других подходит для описания бизнес логики.

## REST (Representational State Transfer)

Если вы уже работали Ruby On Rails, то уже имеете представление о технологии. У нее есть свои плюсы и минусы, полное перечисление которых выходит за рамки данной статьи. Но для нас, как разработчиков корпоративных приложений самым главным недостатком будет то, что REST (это понятно даже из названия) отражает не процесс, а его состояние. А преимуществом будет его понятность - технология ясна как руби разработчикам, так и разработчикам front-end'a. И если даже вам удастся разработать, свой сервисный API, то предоставляя его описание третьим лицам вы получите много вопросов, гораздо больше, чем если вы предоставите привычный REST.

__Так что у нас компромис.__

Мы используем JSON, для лаконичности и JSONapi стандарт, чтобы не устраивать холиваров по поводу формата.

## Sinatra

Этот микрофреймворк отлично подходит для написания микросервисов. Он хорошо документирован. Почему не Rails? Он не соответствует принципам SOLID, что в конечном итоге приводит к высокой связанности и высокой энтропии.  

## MVC (Model View Controller)

Если открыть [Wikipedia](https://ru.wikipedia.org/wiki/Model-View-Controller), то мы узнаем что этот шаблон был придуман  Трюгве Реенскаугом в 1978 году. Это отличный паттерн и он до сих пор актуален. Но основная проблема подхода используемого в Rails в том, что ответственность модели очень высокая. Давайте попробуем их перечислить:
- Хранение данных
- Валидация данных
- Описание процессов
- Сериализация данных (`.to_json`)
- Страктуризация ханимых данных
- Даже авторизациооные права, если у вас девайс

